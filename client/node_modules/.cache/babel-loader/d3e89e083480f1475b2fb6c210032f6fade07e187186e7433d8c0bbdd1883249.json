{"ast":null,"code":"var _jsxFileName = \"D:\\\\backup\\\\OneDrive\\\\Desktop\\\\internship_3\\\\client\\\\src\\\\pages\\\\Dashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport HabitCard from '../components/HabitCard';\nimport HabitCalendar from '../components/Calendar';\nimport { getHabits, addHabit, checkInHabit } from '../api/habits';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Dashboard = () => {\n  _s();\n  const [habits, setHabits] = useState([]);\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [token, setToken] = useState(localStorage.getItem('token') || '');\n  const [selectedHabit, setSelectedHabit] = useState(null);\n  const [calendarValue, setCalendarValue] = useState(new Date());\n  const [apiError, setApiError] = useState('');\n  useEffect(() => {\n    if (token) {\n      getHabits(token).then(res => {\n        console.log('API habits response:', res);\n        if (Array.isArray(res)) {\n          setHabits(res);\n          setApiError('');\n        } else if (res && Array.isArray(res.habits)) {\n          setHabits(res.habits);\n          setApiError('');\n        } else if (res && res.error) {\n          setApiError(res.error);\n          setHabits([]);\n        } else {\n          setApiError('Unexpected API response.');\n          setHabits([]);\n        }\n      }).catch(err => {\n        setApiError('Could not fetch habits.');\n        setHabits([]);\n      });\n    } else {\n      setHabits([]);\n      setApiError('');\n    }\n  }, [token]);\n  const handleAddHabit = async e => {\n    e.preventDefault();\n    if (!name) return;\n    const newHabit = await addHabit({\n      name,\n      description\n    }, token);\n    setHabits([...habits, newHabit]);\n    setName('');\n    setDescription('');\n  };\n  const handleCheckIn = async id => {\n    await checkInHabit(id, token);\n    getHabits(token).then(setHabits);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 max-w-2xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold mb-6\",\n      children: \"Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), !token && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6 card text-center text-red-600 font-semibold\",\n      children: \"Please log in to view and manage your habits.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this), apiError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6 card text-center text-red-600 font-semibold\",\n      children: apiError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this), token && !apiError && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleAddHabit,\n        className: \"mb-6 card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl mb-2\",\n          children: \"Add a new habit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"mb-2 w-full\",\n          type: \"text\",\n          placeholder: \"Habit name\",\n          value: name,\n          onChange: e => setName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"mb-2 w-full\",\n          placeholder: \"Description (optional)\",\n          value: description,\n          onChange: e => setDescription(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-primary w-full\",\n          type: \"submit\",\n          children: \"Add Habit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold mb-3\",\n          children: \"Your Habits\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), Array.isArray(habits) && habits.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"No habits yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 62\n        }, this), Array.isArray(habits) && habits.map(habit => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(HabitCard, {\n            habit: habit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary mt-2\",\n            onClick: () => handleCheckIn(habit._id),\n            children: \"Check In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ml-4 underline text-blue-600\",\n            onClick: () => setSelectedHabit(habit),\n            children: \"Show Calendar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 17\n          }, this), selectedHabit && selectedHabit._id === habit._id && /*#__PURE__*/_jsxDEV(HabitCalendar, {\n            value: calendarValue,\n            onChange: setCalendarValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 19\n          }, this)]\n        }, habit._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"aFbUlVz8dkXoTKIzNdunZc1XAKI=\");\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","HabitCard","HabitCalendar","getHabits","addHabit","checkInHabit","jsxDEV","_jsxDEV","Fragment","_Fragment","Dashboard","_s","habits","setHabits","name","setName","description","setDescription","token","setToken","localStorage","getItem","selectedHabit","setSelectedHabit","calendarValue","setCalendarValue","Date","apiError","setApiError","then","res","console","log","Array","isArray","error","catch","err","handleAddHabit","e","preventDefault","newHabit","handleCheckIn","id","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","target","length","map","habit","onClick","_id","_c","$RefreshReg$"],"sources":["D:/backup/OneDrive/Desktop/internship_3/client/src/pages/Dashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport HabitCard from '../components/HabitCard';\nimport HabitCalendar from '../components/Calendar';\nimport { getHabits, addHabit, checkInHabit } from '../api/habits';\n\nconst Dashboard = () => {\n  const [habits, setHabits] = useState([]);\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [token, setToken] = useState(localStorage.getItem('token') || '');\n  const [selectedHabit, setSelectedHabit] = useState(null);\n  const [calendarValue, setCalendarValue] = useState(new Date());\n  const [apiError, setApiError] = useState('');\n\n  useEffect(() => {\n    if (token) {\n      getHabits(token).then(res => {\n        console.log('API habits response:', res);\n        if (Array.isArray(res)) {\n          setHabits(res);\n          setApiError('');\n        } else if (res && Array.isArray(res.habits)) {\n          setHabits(res.habits);\n          setApiError('');\n        } else if (res && res.error) {\n          setApiError(res.error);\n          setHabits([]);\n        } else {\n          setApiError('Unexpected API response.');\n          setHabits([]);\n        }\n      }).catch((err) => {\n        setApiError('Could not fetch habits.');\n        setHabits([]);\n      });\n    } else {\n      setHabits([]);\n      setApiError('');\n    }\n  }, [token]);\n\n  const handleAddHabit = async (e) => {\n    e.preventDefault();\n    if (!name) return;\n    const newHabit = await addHabit({ name, description }, token);\n    setHabits([...habits, newHabit]);\n    setName('');\n    setDescription('');\n  };\n\n  const handleCheckIn = async (id) => {\n    await checkInHabit(id, token);\n    getHabits(token).then(setHabits);\n  };\n\n  return (\n    <div className=\"p-4 max-w-2xl mx-auto\">\n      <h1 className=\"text-3xl font-bold mb-6\">Dashboard</h1>\n      {!token && (\n        <div className=\"mb-6 card text-center text-red-600 font-semibold\">\n          Please log in to view and manage your habits.\n        </div>\n      )}\n      {apiError && (\n        <div className=\"mb-6 card text-center text-red-600 font-semibold\">\n          {apiError}\n        </div>\n      )}\n      {token && !apiError && (\n        <>\n          <form onSubmit={handleAddHabit} className=\"mb-6 card\">\n            <h2 className=\"text-xl mb-2\">Add a new habit</h2>\n            <input\n              className=\"mb-2 w-full\"\n              type=\"text\"\n              placeholder=\"Habit name\"\n              value={name}\n              onChange={e => setName(e.target.value)}\n            />\n            <textarea\n              className=\"mb-2 w-full\"\n              placeholder=\"Description (optional)\"\n              value={description}\n              onChange={e => setDescription(e.target.value)}\n            />\n            <button className=\"btn-primary w-full\" type=\"submit\">Add Habit</button>\n          </form>\n          <div>\n            <h2 className=\"text-xl font-semibold mb-3\">Your Habits</h2>\n            {Array.isArray(habits) && habits.length === 0 && <div>No habits yet.</div>}\n            {Array.isArray(habits) && habits.map(habit => (\n              <div key={habit._id} className=\"mb-4\">\n                <HabitCard habit={habit} />\n                <button className=\"btn-primary mt-2\" onClick={() => handleCheckIn(habit._id)}>Check In</button>\n                <button className=\"ml-4 underline text-blue-600\" onClick={() => setSelectedHabit(habit)}>Show Calendar</button>\n                {selectedHabit && selectedHabit._id === habit._id && (\n                  <HabitCalendar\n                    value={calendarValue}\n                    onChange={setCalendarValue}\n                  />\n                )}\n              </div>\n            ))}\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}